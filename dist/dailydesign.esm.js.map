{"version":3,"file":"dailydesign.esm.js","sources":["../src/Shot.ts","../src/db/db.config.ts","../src/index.ts"],"sourcesContent":["import mongoose from \"mongoose\";\r\nconst lastShot = new mongoose.Schema({\r\n  shotID: {\r\n    type: String,\r\n    required: true,\r\n  },\r\n  access: {\r\n    type: Boolean,\r\n    default: true,\r\n  },\r\n});\r\n\r\nexport default  mongoose.model(\"lastShot\", lastShot);\r\n","import mongoose from \"mongoose\";\r\nimport \"dotenv/config\"\r\n\r\nconst connection = mongoose.connect(process.env.CONNECTION_STRING as string, (err) => {\r\n  console.log(err);\r\n});\r\n\r\nexport default connection;\r\n","import { BaseGuildTextChannel, ChannelType, Client } from \"discord.js\";\r\nimport puppeteer from \"puppeteer\";\r\nimport cron from \"node-cron\";\r\nimport DribbbleShot from \"./Shot\";\r\nimport \"./db/db.config\";\r\nimport \"dotenv/config\";\r\n//create a discord client to send messages to channels inside bot servers\r\nconst client = new Client({\r\n  intents: [\"GuildMessages\", \"Guilds\", \"GuildMessageTyping\"],\r\n});\r\n\r\n\r\nclient.on(\"ready\", async () => {\r\n  console.log(\"Bot is ready\");\r\n\r\n  client.guilds.cache.map(async (guild) => {\r\n    const existedChannel = guild.channels.cache.find(\r\n      (channel) => channel.name === \"ðŸ’¡-inspirations\"\r\n    );\r\n\r\n    if (!existedChannel)\r\n      await guild.channels.create({\r\n        name: \"ðŸ’¡-inspirations\",\r\n      });\r\n  });\r\n\r\n  const getInspirationChannels = async () => {\r\n    //map over guilds and find channel with id of name inspiration\r\n    const inspirationChannels = client.guilds.cache.map((guild) => {\r\n      const channel = guild.channels.cache.find(\r\n        (channel) => channel.name === \"ðŸ’¡-inspirations\" && channel.type === ChannelType.GuildText\r\n      );\r\n      if(!channel) return;\r\n      return channel as BaseGuildTextChannel;\r\n    });\r\n\r\n    return inspirationChannels;\r\n  };\r\n\r\n\r\n\r\n  cron.schedule(\"* * */1 * *\", async () => {\r\n    try {\r\n      const browser = await puppeteer.launch({\r\n        args: [\"--no-sandbox\", \"--disable-setuid-sandbox\"],\r\n      });\r\n      const page = await browser.newPage();\r\n      await page.goto(\"https://dribbble.com/shots/popular\", {\r\n        waitUntil: \"load\",\r\n        timeout: 0,\r\n      });\r\n      \r\n      const shotID = await page.evaluate(() => {\r\n        const shot = document.querySelector(\".shot-thumbnail-link\");\r\n        return shot?.getAttribute(\"href\");\r\n      });\r\n\r\n      if(!shotID) return browser.close();\r\n\r\n      const existedShot = await DribbbleShot.findOne({ shotID: shotID });\r\n\r\n      if (existedShot) return browser.close();\r\n\r\n      const newShot = new DribbbleShot({\r\n        shotID: shotID,\r\n      });\r\n\r\n      await newShot.save();\r\n\r\n      const inspirationChannels = await getInspirationChannels();\r\n\r\n      inspirationChannels.map(async (channel) => {\r\n        if(channel)\r\n        await channel.send(`https://dribbble.com${shotID}`);\r\n      });\r\n\r\n\r\n      return browser.close();\r\n    } catch (error) {\r\n      console.error(error);\r\n    }\r\n  });\r\n});\r\n\r\nclient.login(process.env.BOT_TOKEN);\r\n"],"names":["lastShot","mongoose","Schema","shotID","type","String","required","access","Boolean","model","connect","process","env","CONNECTION_STRING","err","console","log","client","Client","intents","on","guilds","cache","map","guild","existedChannel","channels","find","channel","name","create","getInspirationChannels","inspirationChannels","ChannelType","GuildText","cron","schedule","puppeteer","launch","args","browser","newPage","page","waitUntil","timeout","evaluate","shot","document","querySelector","getAttribute","close","DribbbleShot","findOne","existedShot","newShot","save","send","error","login","BOT_TOKEN"],"mappings":"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"}